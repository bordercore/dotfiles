# Master .bashrc file
#   by F. Jerrell Schivers
#
# TODO: Split this up into .bash_functions, .bash_aliases, and .bash_prompt.  Then:
#   if [ -f ~/.bash_functions ]; then
#      . ~/.bash_functions
#  fi


# Source global definitions
if [ -f /etc/bashrc ]; then
	. /etc/bashrc
fi

# If not running interactively, don't do anything
[ -z "$PS1" ] && return

# don't put duplicate lines in the history. See bash(1) for more options
#export HISTCONTROL=ignoredups

# Set the maximum number of lines kept in history
export HISTFILESIZE=10000

# Add a timestamp for history
export HISTTIMEFORMAT='%Y-%b-%d %H:%M:%S '

# Set the default editor
export VISUAL="emacs -nw"

# Use emacs for git commit log messages
export GIT_EDITOR=emacs

# Searches in less should not be case-sensitive.
# Set tab stops to be multiples of 4.
export LESS="--ignore-case --tabs=4"

export GREP_OPTIONS="--directories=skip --color=auto"

# define color to additional file types
export LS_COLORS=$LS_COLORS:"*.gif=01;35":"*.jpg=01;35":"*.png=01;35":

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(lesspipe)"

#setup color ls
#eval `dircolors /etc/DIR_COLORS.xterm`

# Point nethack to my personal config file
#export NETHACKOPTIONS="@/usr/lib/games/nethackdir/config/nethackrc-jerrell"

export CLASSPATH=/usr/share/java/xerces-1.4.4.jar
export CLASSPATH=$CLASSPATH:/usr/share/java/gnumail.jar
export CLASSPATH=$CLASSPATH:/usr/share/java/activation.jar
export CLASSPATH=$CLASSPATH:/usr/share/java/inetlib.jar
export CLASSPATH=$CLASSPATH:.

# Options for the ack grep replacement
export ACK_OPTIONS="--ignore-case --ignore-dir=$WWW/docs --ignore-dir=$WWW/rdf --ignore-dir=$WWW/yui"

# Set up the aliases
alias rm="rm -i"
alias ccc="rm *~"
alias rls="ls -l -r -h -B -t"
alias dls="ls -l | grep \"^d\""
alias sniff="sudo tethereal -n -l"
alias f="find . |grep "
alias tf='tail -f'

# Handle Linux and OS X differences here
if [ `uname` == "Darwin" ]; then
    alias ls='ls -G -F'
else
       #eval "`dircolors -b`"
    alias ls='ls -F --color=auto'
fi

# Directory navigation aliases
alias ..='cd ..'
alias ...='cd ../..'

# Ignore whitespace when using the svn diff command
alias svndiff='svn diff --diff-cmd diff -x -uw'

# usefull alias to browse your filesystem for heavy usage quickly
alias ducks='find . -maxdepth 1 -mindepth 1 -print0  | xargs -0 -n1 du -ks | sort -rn | head -16 | cut -f2 | xargs -i du -hs {}'

# Look for dot files
alias l.='ls -d .[[:alnum:]]* 2> /dev/null || echo "No hidden file here..."'

# Control Apache
alias bounce='sudo /home/www/apache/bin/apachectl'

# Prevent core dumps
ulimit -c 0

set noclobber

# bash completion support for Git
GIT_BASH_SCRIPT=$HOME/bin/git-completion.bash
if [ -e $GIT_BASH_SCRIPT ]; then
    source $GIT_BASH_SCRIPT
    GIT_PS1_SHOWDIRTYSTATE=1  # show unstaged (*) and staged (+) changes
    GIT_PS1_SHOWUNTRACKEDFILES=1 # show untracked files
fi

source $HOME/.prompt
set_prompt

# Support for color man pages
export LESS_TERMCAP_mb=$'\E[01;31m'
export LESS_TERMCAP_md=$'\E[01;31m'
export LESS_TERMCAP_me=$'\E[0m'
export LESS_TERMCAP_se=$'\E[0m'                           
export LESS_TERMCAP_so=$'\E[01;44;33m'                                 
export LESS_TERMCAP_ue=$'\E[0m'
export LESS_TERMCAP_us=$'\E[01;32m'

function dis {

    export DISPLAY=$1:0.0

}

extract () {
    if [ -f $1 ] ; then
	case $1 in
	    *.tar.bz2)  tar xjf $1    ;;
            *.tar.gz)   tar xzf $1    ;;
            *.bz2)      bunzip2 $1    ;;
            *.rar)      rar x $1      ;;
            *.gz)       gunzip $1     ;;
            *.tar)      tar xf $1     ;;
            *.tbz2)     tar xjf $1    ;;
            *.tgz)      tar xzf $1    ;;
            *.zip)      unzip $1      ;;
            *.Z)        uncompress $1 ;;
            *)          echo "'$1' cannot be extracted via extract()" ;;
         esac
    else
        echo "'$1' is not a valid file"
    fi
}

psgrep () {
    if [ ! -z $1 ] ; then
	echo "Grepping for processes matching $1..."
	ps aux | grep $1 | grep -v grep
	else
	echo "!! Need name to grep for"
	fi
}

#
# Source your location or host specific .bashrc file here
#
# Eg: . $HOME/.bashrc-bordercore
#
. $HOME/.bashrc-bordercore

